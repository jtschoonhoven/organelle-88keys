#N canvas -1706 -433 1706 1387 12;
#X obj 609 127 list_samples;
#X obj 809 127 text define note_to_wav;
#X obj 838 228 text delete note_to_wav;
#X msg 809 197 -1;
#X obj 572 49 inlet;
#N canvas 92 130 556 433 arrays 0;
#X obj 10 0 table array-88;
#X obj 10 20 table array-84;
#X obj 10 40 table array-81;
#X obj 10 60 table array-72;
#X obj 10 80 table array-69;
#X obj 10 100 table array-60;
#X obj 10 120 table array-57;
#X obj 10 140 table array-48;
#X obj 10 160 table array-45;
#X obj 10 180 table array-36;
#X obj 10 200 table array-33;
#X obj 10 220 table array-24;
#X obj 10 240 table array-21;
#X restore 734 710 pd arrays;
#X obj 590 391 until;
#X msg 590 461 step;
#X msg 762 356 line 0;
#X obj 788 457 float;
#X floatatom 819 317 5 0 0 0 - - - 0;
#X obj 590 426 t b b;
#X obj 857 457 + 1;
#X obj 788 492 t f f;
#X obj 622 570 unpack f s;
#X obj 622 710 s pd-arrays;
#X obj 788 527 * 20;
#X msg 463 457 clear;
#X obj 590 293 t b b b b;
#X text 317 456 reset subpatch -->;
#X text 871 316 <-- init counter value;
#X text 897 456 <-- increment counter each sample;
#X text 323 355 iterate for each sample in file -->;
#X text 830 530 <-- y-offset of new object in subpatch;
#X text 836 674 <-- dynamically add table to subpatch;
#X obj 590 531 t l l;
#X obj 592 788 soundfiler;
#X floatatom 592 823 5 0 0 0 - - - 0;
#X msg 592 753 read -resize \$2 array-\$1;
#X text 360 160 populate note_to_wav list -->;
#X text 639 826 <-- number of samples in this wav file;
#X text 836 706 <-- click to view subpatch;
#X text 994 126 <-- ensure text lists exist;
#X text 1029 227 <-- ensure text lists begin empty;
#X obj 401 827 pack f s f f;
#X text 430 569 midi_note \, path_to_wav -->;
#X text 451 642 midi_note \, y-offset -->;
#X text 317 488 read lines: midi_note \, path_to_wav -->;
#X obj 622 640 pack s f;
#X msg 622 675 obj 10 \$2 table \$1;
#X msg 622 605 array-\$1;
#X text 494 605 name of array -->;
#X msg 156 903 88;
#X obj 156 938 until;
#X obj 156 973 float;
#X msg 225 938 21;
#X obj 241 1008 + 1;
#X text 204 902 <-- iterate once for each piano key;
#X text 271 1007 <-- iterate all 88 midi notes \, 21-108;
#X text 272 937 <-- initialize counter to 21 \, the first note (A0);
#X obj 572 84 t b b s b b;
#X text 457 1038 <-- get the closest sample for this midi note;
#X text 408 1073 <-- extract the matching midi note;
#X obj 268 1214 array size;
#X msg 245 1145 symbol array-\$1;
#X obj 175 1258 pack f s f f;
#X obj 245 1180 t s b s;
#X obj 195 1149 -;
#X obj 213 1109 t f f;
#X obj 156 868 t b b;
#X text 374 1297 <-- note_to_array is a list of: midi_note \, array_name \, note_offset \, num_samples;
#X obj 809 162 text define _note_to_array;
#X obj 809 255 text delete _note_to_array;
#X obj 213 1074 text get note_to_wav \$1;
#X obj 213 1039 text search note_to_wav near \$1;
#X obj 590 496 text sequence note_to_wav;
#X obj 590 356 text size note_to_wav;
#X obj 609 162 text fromlist note_to_wav;
#X obj 175 1297 text insert _note_to_array;
#X obj 156 1008 t f f f f f;
#X obj 155 1346 select 108;
#X text 242 1345 <-- selecting 108 runs at end of loop;
#X obj 155 1426 outlet;
#X obj 155 1386 text tolist _note_to_array;
#X text 221 1425 <-- return the _note_to_list map as a list;
#X text 38 33 This subpatch receives an instrument name and returns a list of: (midi_note \, array_name \, note_offset \, num_samples), f 65;
#X connect 0 0 67 0;
#X connect 3 0 2 0;
#X connect 3 0 62 0;
#X connect 4 0 50 0;
#X connect 6 0 11 0;
#X connect 7 0 65 0;
#X connect 8 0 65 0;
#X connect 9 0 13 0;
#X connect 10 0 9 1;
#X connect 11 0 7 0;
#X connect 11 1 9 0;
#X connect 12 0 9 1;
#X connect 13 0 16 0;
#X connect 13 1 12 0;
#X connect 14 0 40 0;
#X connect 14 0 34 0;
#X connect 16 0 38 1;
#X connect 17 0 15 0;
#X connect 18 0 66 0;
#X connect 18 1 8 0;
#X connect 18 2 10 0;
#X connect 18 3 17 0;
#X connect 25 0 28 0;
#X connect 25 1 14 0;
#X connect 26 0 27 0;
#X connect 28 0 26 0;
#X connect 38 0 39 0;
#X connect 39 0 15 0;
#X connect 40 0 38 0;
#X connect 40 0 34 1;
#X connect 42 0 43 0;
#X connect 43 0 44 0;
#X connect 44 0 69 0;
#X connect 45 0 44 1;
#X connect 46 0 44 1;
#X connect 50 0 59 0;
#X connect 50 1 18 0;
#X connect 50 2 0 0;
#X connect 50 3 3 0;
#X connect 50 4 1 0;
#X connect 50 4 61 0;
#X connect 53 0 55 3;
#X connect 54 0 56 0;
#X connect 55 0 68 0;
#X connect 56 0 55 1;
#X connect 56 1 53 0;
#X connect 56 2 53 1;
#X connect 57 0 55 2;
#X connect 58 0 57 1;
#X connect 58 1 54 0;
#X connect 59 0 42 0;
#X connect 59 1 45 0;
#X connect 63 0 58 0;
#X connect 64 0 63 0;
#X connect 65 0 25 0;
#X connect 66 0 6 0;
#X connect 69 0 70 0;
#X connect 69 1 55 0;
#X connect 69 2 57 0;
#X connect 69 3 64 0;
#X connect 69 4 46 0;
#X connect 70 0 73 0;
#X connect 73 0 72 0;
