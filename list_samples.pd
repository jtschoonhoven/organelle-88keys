#N canvas 1003 0 2005 1664 12;
#X obj 317 96 inlet;
#X msg 318 293 88;
#X obj 318 333 until;
#X obj 318 373 float;
#X msg 387 330 21;
#X obj 387 370 + 1;
#X text 386 95 <-- receives the name of an instrument folder;
#X text 387 292 <-- iterate once for each piano key;
#X text 431 369 <-- iterate all 88 midi notes \, 21-108;
#X obj 318 453 mod 12;
#X obj 318 493 select 0 1 2 3 4 5 6 7 8 9 10 11;
#X msg 540 550 A;
#X msg 611 550 B;
#X msg 245 549 C;
#X msg 379 549 E;
#X msg 410 549 F;
#X msg 473 549 G;
#X msg 346 549 Eb;
#X msg 576 550 Bb;
#X msg 278 549 Db;
#X msg 311 549 D;
#X msg 442 549 Gb;
#X msg 506 549 Ab;
#X text 388 452 <-- mod 12 so that 0=C \, 1=C# \, etc;
#X text 560 491 <-- get all possible note names;
#X obj 797 453 / 12;
#X obj 797 551 int;
#X obj 797 493 - 1;
#X text 840 452 <-- divide by 12 to get the octave number;
#X obj 430 617 pack s f;
#X text 512 616 <-- combine note and octave to get all notes A0-C8;
#X text 431 332 <-- initialize counter to 21 \, the first note (A0);
#X obj 138 813 spigot, f 8;
#X obj 318 413 t f f f f;
#X floatatom 104 453 5 0 0 0 - - - 0;
#X text 1126 176 <-- map midi notes to wav files;
#X obj 420 882 pack f s;
#X obj 104 492 t f f;
#X obj 105 982 select 108;
#X text 192 981 <-- selecting 108 runs at end of loop;
#X obj 105 1062 outlet;
#X text 171 1061 <-- return the note_to_wav map as a list;
#X obj 420 922 text insert _note_to_wav;
#X obj 105 1022 text tolist _note_to_wav;
#X obj 1024 326 text delete _note_to_wav;
#X msg 1008 297 -1;
#X text 86 40 This subpatch receives the name of an instrument folder and returns a list of (midi_note_int \, path_to_sample.wav).;
#X obj 1122 579 folder_list;
#X msg 1121 549 symbol instruments/\$1/*;
#X obj 1123 607 split_path;
#X text 1115 207 <-- list of wav files for instrument like C3.wav;
#X obj 1009 352 text delete _wav_files;
#X text 1208 326 <-- ensure lists are empty at start;
#X obj 924 175 text define -k _note_to_wav;
#A set 108 instruments/Rhodes/C8.wav \; 107 instruments/Rhodes/B7.wav \; 106 instruments/Rhodes/Bb7.wav \; 105 instruments/Rhodes/A7.wav \; 104 instruments/Rhodes/Ab7.wav \; 103 instruments/Rhodes/G7.wav \; 102 instruments/Rhodes/Gb7.wav \; 101 instruments/Rhodes/F7.wav \; 100 instruments/Rhodes/E7.wav \; 99 instruments/Rhodes/Eb7.wav \; 98 instruments/Rhodes/D7.wav \; 97 instruments/Rhodes/Db7.wav \; 96 instruments/Rhodes/C7.wav \; 95 instruments/Rhodes/B6.wav \; 94 instruments/Rhodes/Bb6.wav \; 93 instruments/Rhodes/A6.wav \; 92 instruments/Rhodes/Ab6.wav \; 91 instruments/Rhodes/G6.wav \; 90 instruments/Rhodes/Gb6.wav \; 89 instruments/Rhodes/F6.wav \; 88 instruments/Rhodes/E6.wav \; 87 instruments/Rhodes/Eb6.wav \; 86 instruments/Rhodes/D6.wav \; 85 instruments/Rhodes/Db6.wav \; 84 instruments/Rhodes/C6.wav \; 83 instruments/Rhodes/B5.wav \; 82 instruments/Rhodes/Bb5.wav \; 81 instruments/Rhodes/A5.wav \; 80 instruments/Rhodes/Ab5.wav \; 79 instruments/Rhodes/G5.wav \; 78 instruments/Rhodes/Gb5.wav \; 77 instruments/Rhodes/F5.wav \; 76 instruments/Rhodes/E5.wav \; 75 instruments/Rhodes/Eb5.wav \; 74 instruments/Rhodes/D5.wav \; 73 instruments/Rhodes/Db5.wav \; 72 instruments/Rhodes/C5.wav \; 71 instruments/Rhodes/B4.wav \; 70 instruments/Rhodes/Bb4.wav \; 69 instruments/Rhodes/A4.wav \; 68 instruments/Rhodes/Ab4.wav \; 67 instruments/Rhodes/G4.wav \; 66 instruments/Rhodes/Gb4.wav \; 65 instruments/Rhodes/F4.wav \; 64 instruments/Rhodes/E4.wav \; 63 instruments/Rhodes/Eb4.wav \; 62 instruments/Rhodes/D4.wav \; 61 instruments/Rhodes/Db4.wav \; 60 instruments/Rhodes/C4.wav \; 59 instruments/Rhodes/B3.wav \; 58 instruments/Rhodes/Bb3.wav \; 57 instruments/Rhodes/A3.wav \; 56 instruments/Rhodes/Ab3.wav \; 55 instruments/Rhodes/G3.wav \; 54 instruments/Rhodes/Gb3.wav \; 53 instruments/Rhodes/F3.wav \; 52 instruments/Rhodes/E3.wav \; 51 instruments/Rhodes/Eb3.wav \; 50 instruments/Rhodes/D3.wav \; 49 instruments/Rhodes/Db3.wav \; 48 instruments/Rhodes/C3.wav \; 47 instruments/Rhodes/B2.wav \; 46 instruments/Rhodes/Bb2.wav \; 45 instruments/Rhodes/A2.wav \; 44 instruments/Rhodes/Ab2.wav \; 43 instruments/Rhodes/G2.wav \; 42 instruments/Rhodes/Gb2.wav \; 41 instruments/Rhodes/F2.wav \; 40 instruments/Rhodes/E2.wav \; 39 instruments/Rhodes/Eb2.wav \; 38 instruments/Rhodes/D2.wav \; 37 instruments/Rhodes/Db2.wav \; 36 instruments/Rhodes/C2.wav \; 35 instruments/Rhodes/B1.wav \; 34 instruments/Rhodes/Bb1.wav \; 33 instruments/Rhodes/A1.wav \; 32 instruments/Rhodes/Ab1.wav \; 31 instruments/Rhodes/G1.wav \; 30 instruments/Rhodes/Gb1.wav \; 29 instruments/Rhodes/F1.wav \; 28 instruments/Rhodes/E1.wav \; 27 instruments/Rhodes/Eb1.wav \; 26 instruments/Rhodes/D1.wav \; 25 instruments/Rhodes/Db1.wav \; 24 instruments/Rhodes/C1.wav \; 23 instruments/Rhodes/B0.wav \; 22 instruments/Rhodes/Bb0.wav \; 21 instruments/Rhodes/A0.wav \;;
#X obj 925 206 text define -k _wav_files;
#A set G5p.wav \; G5.wav \; G4f.wav \; G2p.wav \; G2f.wav \; G2.wav \; G1p.wav \; G1f.wav \; G1.wav \; G0f.wav \; G0.wav \; F4p.wav \; F4.wav \; Eb5f.wav \; Eb4f.wav \; Eb4.wav \; Eb3p.wav \; Eb3f.wav \; Eb3.wav \; Eb2f.wav \; Eb1p.wav \; C6f.wav \; C6.wav \; C5p.wav \; C5f.wav \; C5.wav \; C4f.wav \; C3p.wav \; C3f.wav \; C3.wav \; C2p.wav \; C2.wav \; C1p.wav \; C1.wav \; Bb5p.wav \; Bb3p.wav \; Bb3.wav \; Bb0f.wav \;;
#X obj 1123 637 text insert _wav_files;
#X msg 430 648 symbol \$1\$2.wav;
#X obj 191 709 text search _wav_files;
#X obj 191 740 select -1;
#X msg 203 95 symbol Rhodes;
#X msg 251 777 1;
#X obj 429 676 t s s;
#X text 289 776 <-- open spigot if wav exists;
#X obj 317 136 t b b s s b b, f 67;
#X obj 743 737 pack s s;
#X msg 743 770 symbol instruments/\$2/\$1;
#X msg 191 776 0;
#X connect 0 0 63 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 33 0;
#X connect 4 0 3 1;
#X connect 5 0 3 1;
#X connect 9 0 10 0;
#X connect 10 0 13 0;
#X connect 10 1 19 0;
#X connect 10 2 20 0;
#X connect 10 3 17 0;
#X connect 10 4 14 0;
#X connect 10 5 15 0;
#X connect 10 6 21 0;
#X connect 10 7 16 0;
#X connect 10 8 22 0;
#X connect 10 9 11 0;
#X connect 10 10 18 0;
#X connect 10 11 12 0;
#X connect 11 0 29 0;
#X connect 12 0 29 0;
#X connect 13 0 29 0;
#X connect 14 0 29 0;
#X connect 15 0 29 0;
#X connect 16 0 29 0;
#X connect 17 0 29 0;
#X connect 18 0 29 0;
#X connect 19 0 29 0;
#X connect 20 0 29 0;
#X connect 21 0 29 0;
#X connect 22 0 29 0;
#X connect 25 0 27 0;
#X connect 26 0 29 1;
#X connect 27 0 26 0;
#X connect 29 0 56 0;
#X connect 32 0 36 0;
#X connect 33 0 34 0;
#X connect 33 1 9 0;
#X connect 33 2 25 0;
#X connect 33 3 5 0;
#X connect 34 0 37 0;
#X connect 36 0 42 0;
#X connect 37 0 38 0;
#X connect 37 1 32 0;
#X connect 38 0 43 0;
#X connect 43 0 40 0;
#X connect 45 0 44 0;
#X connect 45 0 51 0;
#X connect 47 0 49 0;
#X connect 48 0 47 0;
#X connect 49 0 55 0;
#X connect 56 0 61 0;
#X connect 57 0 58 0;
#X connect 58 0 66 0;
#X connect 58 1 60 0;
#X connect 59 0 63 0;
#X connect 60 0 32 1;
#X connect 61 0 57 0;
#X connect 61 1 64 0;
#X connect 63 0 1 0;
#X connect 63 1 4 0;
#X connect 63 2 64 1;
#X connect 63 3 48 0;
#X connect 63 4 45 0;
#X connect 63 5 53 0;
#X connect 63 5 54 0;
#X connect 64 0 65 0;
#X connect 65 0 36 1;
#X connect 66 0 32 1;
